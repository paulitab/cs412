<!-- voter_analytics/templates/voter_analytics/voter_list.html -->
<h1>Voter List</h1>

<form method="get">
    <label for="party">Party Affiliation:</label>
    <select name="party" id="party">
        <option value="">All</option>
        <option value="Democratic">Democratic</option>
        <option value="Republican">Republican</option>
        <option value="Unaffiliated">Unaffiliated</option>
    </select>

    <label for="min_dob">Minimum DOB:</label>
    <select name="min_dob" id="min_dob">
        <option value="">Any</option>
        {% for year in 1900|add:"-2023" %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
    </select>

    <label for="max_dob">Maximum DOB:</label>
    <select name="max_dob" id="max_dob">
        <option value="">Any</option>
        {% for year in 1900|add:"-2023" %}
            <option value="{{ year }}">{{ year }}</option>
        {% endfor %}
    </select>

    <label for="voter_score">Voter Score:</label>
    <select name="voter_score" id="voter_score">
        <option value="">All</option>
        {% for score in 0|add:"-5" %}
            <option value="{{ score }}">{{ score }}</option>
        {% endfor %}
    </select>

    <!-- Election participation checkboxes -->
    {% for election in ['v20state', 'v21town', 'v21primary', 'v22general', 'v23town'] %}
        <label for="{{ election }}">{{ election }}</label>
        <input type="checkbox" name="{{ election }}" id="{{ election }}" {% if request.GET.election %}checked{% endif %}>
    {% endfor %}

    <button type="submit">Filter</button>
</form>

<ul>
    {% for voter in voters %}
        <li>
            <a href="{% url 'voter' voter.pk %}">
                {{ voter.first_name }} {{ voter.last_name }}
            </a> - {{ voter.street_address }} - {{ voter.date_of_birth }} - {{ voter.party_affiliation }} - Score: {{ voter.voter_score }}
        </li>
    {% endfor %}
</ul>

<div class="pagination">
    {% if is_paginated %}
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}">First</a>
                <a href="?page={{ page_obj.previous_page_number }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}">Previous</a>
            {% endif %}

            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}">Next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}">Last</a>
            {% endif %}
        </span>
    {% endif %}
</div>
